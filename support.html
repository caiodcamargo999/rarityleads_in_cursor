<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="support.title">Rarity Leads - Support Center</title>
    <meta name="description" data-i18n="support.subtitle" content="Get help and support for your Rarity Leads account with 24/7 assistance">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="design-system.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="dashboard-layout">
        <aside class="sidebar" role="navigation" aria-label="Main navigation">
            <div class="sidebar-logo"><img src="rarity-logo.jpg" alt="Rarity Leads Logo" style="height:40px;width:auto;object-fit:contain;display:block;margin:0 auto;"></div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="dashboard.html" data-i18n="nav.dashboard">Dashboard</a></li>
                    <li><a href="prospecting-leads.html" data-i18n="nav.leads">Leads</a></li>
                    <li><a href="prospecting-companies.html" data-i18n="nav.companies">Companies</a></li>
                    <li><a href="approaching-whatsapp.html" data-i18n="nav.whatsapp">WhatsApp</a></li>
                    <li><a href="approaching-linkedin.html" data-i18n="nav.linkedin">LinkedIn</a></li>
                    <li><a href="approaching-instagram.html" data-i18n="nav.instagram">Instagram</a></li>
                    <li><a href="approaching-facebook.html" data-i18n="nav.facebook">Facebook</a></li>
                    <li><a href="approaching-x.html" data-i18n="nav.x">X</a></li>
                    <li><a href="analytics.html" data-i18n="nav.analytics">Analytics</a></li>
                    <li><a href="support.html" class="active" data-i18n="nav.support">Support</a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <button class="logout-btn" id="logout-btn" data-i18n="auth.logout">Logout</button>
            </div>
        </aside>
        <main class="main-content" role="main">
            <div class="support-header">
                <div>
                    <div class="support-title" data-i18n="support.title">Support Center</div>
                    <div class="support-subtitle" data-i18n="support.subtitle">Get help and support for your Rarity Leads account with 24/7 assistance</div>
                </div>
                <div style="display: flex; gap: 12px;">
                    <button class="contact-btn" id="contact-btn" data-i18n="support.contact">
                        <i class="fas fa-envelope"></i>
                        <span data-i18n="support.contact">Contact Support</span>
                    </button>
                    <button class="demo-btn" id="demo-btn" data-i18n="support.demo">
                        <i class="fas fa-video"></i>
                        <span data-i18n="support.demo">Schedule Demo</span>
                    </button>
                </div>
            </div>
            <div class="metrics-grid" role="region" aria-label="Support metrics">
                <div class="metric-card" role="article">
                    <div class="metric-icon response">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="metric-value" data-i18n="support.metrics.responseTime">0 min</div>
                    <div class="metric-label" data-i18n="support.metrics.responseTimeLabel">Average Response Time</div>
                    <div class="metric-description" data-i18n="support.metrics.responseTimeDesc">24/7 Support Available</div>
                </div>
                <div class="metric-card" role="article">
                    <div class="metric-icon articles">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="metric-value" data-i18n="support.metrics.articles">0</div>
                    <div class="metric-label" data-i18n="support.metrics.articlesLabel">Help Articles</div>
                    <div class="metric-description" data-i18n="support.metrics.articlesDesc">Searchable Knowledge Base</div>
                </div>
                <div class="metric-card" role="article">
                    <div class="metric-icon tutorials">
                        <i class="fas fa-video"></i>
                    </div>
                    <div class="metric-value" data-i18n="support.metrics.tutorials">0</div>
                    <div class="metric-label" data-i18n="support.metrics.tutorialsLabel">Video Tutorials</div>
                    <div class="metric-description" data-i18n="support.metrics.tutorialsDesc">Step-by-step Guides</div>
                </div>
                <div class="metric-card" role="article">
                    <div class="metric-icon satisfaction">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="metric-value" data-i18n="support.metrics.satisfaction">0%</div>
                    <div class="metric-label" data-i18n="support.metrics.satisfactionLabel">Satisfaction Rate</div>
                    <div class="metric-description" data-i18n="support.metrics.satisfactionDesc">5-star Support Team</div>
                </div>
            </div>
            <div class="tabs" role="tablist" aria-label="Support views">
                <button class="tab active" id="tab-faq" role="tab" aria-selected="true" aria-controls="faq-view" data-i18n="support.tabs.faq">FAQ</button>
                <button class="tab" id="tab-contact" role="tab" aria-selected="false" aria-controls="contact-view" data-i18n="support.tabs.contact">Contact</button>
                <button class="tab" id="tab-resources" role="tab" aria-selected="false" aria-controls="resources-view" data-i18n="support.tabs.resources">Resources</button>
            </div>
            <div class="tab-content" id="tab-content">
                <div id="faq-view" role="tabpanel" aria-labelledby="tab-faq">
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" id="faq-search" placeholder="Search FAQ..." data-i18n-placeholder="support.search.placeholder">
                    </div>
                    <div class="faq-container" id="faq-container">
                        <!-- FAQ content will be loaded here -->
                    </div>
                </div>
                <div id="contact-view" role="tabpanel" aria-labelledby="tab-contact" style="display:none;">
                    <h3 data-i18n="support.contact.title">Get in Touch</h3>
                    <p data-i18n="support.contact.description">Choose your preferred method to reach our support team</p>
                    <div class="contact-methods">
                        <div class="contact-method">
                            <div class="contact-icon email">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <h3 data-i18n="support.contact.email.title">Email Support</h3>
                            <p data-i18n="support.contact.email.description">Get detailed responses within 2 hours</p>
                            <button class="contact-btn-small" onclick="Support.contactEmail()" data-i18n="support.contact.email.button">Send Email</button>
                        </div>
                        <div class="contact-method">
                            <div class="contact-icon chat">
                                <i class="fas fa-comments"></i>
                            </div>
                            <h3 data-i18n="support.contact.chat.title">Live Chat</h3>
                            <p data-i18n="support.contact.chat.description">Instant support during business hours</p>
                            <button class="contact-btn-small" onclick="Support.startChat()" data-i18n="support.contact.chat.button">Start Chat</button>
                        </div>
                        <div class="contact-method">
                            <div class="contact-icon phone">
                                <i class="fas fa-phone"></i>
                            </div>
                            <h3 data-i18n="support.contact.phone.title">Phone Support</h3>
                            <p data-i18n="support.contact.phone.description">Speak directly with our team</p>
                            <button class="contact-btn-small" onclick="Support.callPhone()" data-i18n="support.contact.phone.button">Call Now</button>
                        </div>
                    </div>
                </div>
                <div id="resources-view" role="tabpanel" aria-labelledby="tab-resources" style="display:none;">
                    <h3 data-i18n="support.resources.title">Helpful Resources</h3>
                    <p data-i18n="support.resources.description">Access our comprehensive library of guides and tutorials</p>
                    <!-- Resources content -->
                </div>
            </div>
        </main>
    </div>
    <script src="app-config.js"></script>
    <script src="i18n.js"></script>
    <script>
        // Support Module
        const Support = {
            supabase: null,
            currentLanguage: 'en',
            faqData: [],
            
            async init() {
                this.supabase = window.AppUtils ? window.AppUtils.initSupabase() : null;
                await this.checkAuth();
                await this.initI18n();
                this.bindEvents();
                this.loadFAQ();
            },
            
            async checkAuth() {
                if (!this.supabase) return;
                const { data: { session } } = await this.supabase.auth.getSession();
                if (!session || !session.user || !session.user.email_confirmed_at) {
                    window.location.href = '/register.html';
                    return;
                }
            },
            
            async initI18n() {
                if (window.i18n) {
                    this.currentLanguage = await window.i18n.detectLanguage();
                    await window.i18n.translatePage();
                }
            },
            
            bindEvents() {
                // Logout
                document.getElementById('logout-btn').addEventListener('click', () => this.logout());
                
                // Tabs
                const tabs = document.querySelectorAll('.tab');
                tabs.forEach(tab => {
                    tab.addEventListener('click', () => this.switchTab(tab));
                });
                
                // Buttons
                document.getElementById('contact-btn').addEventListener('click', () => this.contactSupport());
                document.getElementById('demo-btn').addEventListener('click', () => this.scheduleDemo());
                
                // FAQ Search
                document.getElementById('faq-search').addEventListener('input', (e) => this.searchFAQ(e.target.value));
                
                // Keyboard navigation
                document.addEventListener('keydown', (e) => this.handleKeyboard(e));
            },
            
            switchTab(activeTab) {
                // Update tab states
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                    tab.setAttribute('aria-selected', 'false');
                });
                activeTab.classList.add('active');
                activeTab.setAttribute('aria-selected', 'true');
                
                // Show corresponding content
                const targetId = activeTab.getAttribute('aria-controls');
                document.querySelectorAll('[role="tabpanel"]').forEach(panel => {
                    panel.style.display = 'none';
                });
                document.getElementById(targetId).style.display = '';
            },
            
            handleKeyboard(e) {
                // Tab navigation with arrow keys
                if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                    const tabs = document.querySelectorAll('.tab');
                    const activeTab = document.querySelector('.tab.active');
                    const currentIndex = Array.from(tabs).indexOf(activeTab);
                    
                    if (e.key === 'ArrowLeft' && currentIndex > 0) {
                        tabs[currentIndex - 1].click();
                    } else if (e.key === 'ArrowRight' && currentIndex < tabs.length - 1) {
                        tabs[currentIndex + 1].click();
                    }
                }
            },
            
            async logout() {
                if (this.supabase) await this.supabase.auth.signOut();
                window.location.href = '/register.html';
            },
            
            loadFAQ() {
                this.faqData = [
                    {
                        category: 'Getting Started',
                        icon: 'fas fa-rocket',
                        questions: [
                            {
                                question: 'How do I set up my first campaign?',
                                answer: 'Setting up your first campaign is easy: Go to Dashboard and click "New Campaign", choose your target sector, set your lead criteria, connect your WhatsApp account(s), create your message templates, and launch and monitor your campaign. Our AI will automatically find and qualify leads based on your criteria.'
                            },
                            {
                                question: 'How many WhatsApp accounts can I connect?',
                                answer: 'The number of WhatsApp accounts depends on your plan: Starter plan allows up to 2 WhatsApp accounts, Professional plan allows up to 5 WhatsApp accounts, and Enterprise plan allows unlimited WhatsApp accounts. Each account can be managed from a single dashboard with easy switching between numbers.'
                            },
                            {
                                question: 'What is the difference between warm and cold leads?',
                                answer: 'Warm leads are prospects who have shown intent signals such as recent hiring activity, funding announcements, technology stack changes, or website activity. Cold leads are prospects with no recent activity but match your ICP criteria. Our AI prioritizes warm leads for higher conversion rates.'
                            }
                        ]
                    },
                    {
                        category: 'Features & Functionality',
                        icon: 'fas fa-cogs',
                        questions: [
                            {
                                question: 'How does the AI lead scoring work?',
                                answer: 'Our AI analyzes 500+ data points to score leads including firmographics (company size, revenue, industry), technographics (technology stack, tools used), behavioral signals (website activity, social engagement), and intent signals (recent hiring, funding, expansion). Leads are scored 0-100, with 80+ being highly qualified prospects ready to engage.'
                            },
                            {
                                question: 'Can I integrate with my existing CRM?',
                                answer: 'Yes! We support two-way sync with major CRMs including HubSpot (full integration with contact sync), Pipedrive (deal and contact management), Salesforce (enterprise-level integration), and custom APIs available for Enterprise plans. Leads and conversation history automatically sync to your CRM.'
                            },
                            {
                                question: 'How does phone number validation work?',
                                answer: 'We validate phone numbers through multiple methods: WhatsApp Business API checks if number is registered, third-party validation through Numverify and Twilio Lookup, and real-time verification with active status checking. Numbers are categorized as "WhatsApp-enabled" or "SMS-only" for optimal outreach.'
                            }
                        ]
                    }
                ];
                
                this.renderFAQ();
            },
            
            renderFAQ() {
                const container = document.getElementById('faq-container');
                
                container.innerHTML = this.faqData.map(category => `
                    <div class="faq-category">
                        <h4 class="faq-category-title">
                            <i class="${category.icon}"></i>
                            ${category.category}
                        </h4>
                        ${category.questions.map(q => `
                            <div class="faq-item">
                                <div class="faq-question" onclick="Support.toggleFAQ(this)">
                                    <h5>${q.question}</h5>
                                    <i class="fas fa-chevron-down faq-arrow"></i>
                                </div>
                                <div class="faq-answer">
                                    <p>${q.answer}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `).join('');
            },
            
            toggleFAQ(element) {
                const faqItem = element.closest('.faq-item');
                const isOpen = faqItem.classList.contains('open');
                
                // Close all FAQ items
                document.querySelectorAll('.faq-item').forEach(item => {
                    item.classList.remove('open');
                });
                
                // Open clicked item if it wasn't open
                if (!isOpen) {
                    faqItem.classList.add('open');
                }
            },
            
            searchFAQ(query) {
                const faqItems = document.querySelectorAll('.faq-item');
                const searchTerm = query.toLowerCase();
                
                faqItems.forEach(item => {
                    const question = item.querySelector('h5').textContent.toLowerCase();
                    const answer = item.querySelector('.faq-answer p').textContent.toLowerCase();
                    
                    if (question.includes(searchTerm) || answer.includes(searchTerm)) {
                        item.style.display = '';
                    } else {
                        item.style.display = 'none';
                    }
                });
            },
            
            contactSupport() {
                // Placeholder for contact support functionality
                console.log('Contacting support...');
                alert('Contact support functionality coming soon');
            },
            
            scheduleDemo() {
                // Placeholder for schedule demo functionality
                console.log('Scheduling demo...');
                alert('Schedule demo functionality coming soon');
            },
            
            contactEmail() {
                window.open('mailto:support@rarityleads.com', '_blank');
            },
            
            startChat() {
                // Placeholder for live chat functionality
                console.log('Starting live chat...');
                alert('Live chat functionality coming soon');
            },
            
            callPhone() {
                window.open('tel:+1-555-0123', '_blank');
            }
        };
        
        // Initialize Support when DOM is ready
        document.addEventListener('DOMContentLoaded', () => Support.init());
    </script>
</body>
</html>
