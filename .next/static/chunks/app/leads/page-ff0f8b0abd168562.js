(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[362],{2596:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=function(){for(var e,t,a=0,r="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=function e(t){var a,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var d=t.length;for(a=0;a<d;a++)t[a]&&(r=e(t[a]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}(e))&&(r&&(r+=" "),r+=t);return r}},2756:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),s=a(2115),d=a(5695),n=a(5060),i=a(6637),l=a(2099),o=a(3741);function c(){let[e,t]=(0,s.useState)([]),[a,c]=(0,s.useState)(!0),[u,m]=(0,s.useState)(!1),[b,x]=(0,s.useState)({name:"",email:""}),[h,g]=(0,s.useState)(null),p=(0,d.useRouter)(),[f,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{let e=(0,l.b)();if(!e)return;let{data:{user:a}}=await e.auth.getUser();if(!a)return p.push("/auth");g(a);let{data:r,error:s}=await e.from("leads").select("id, data, status, created_at").eq("user_id",a.id).order("created_at",{ascending:!1});!s&&r&&t(r.map(e=>({id:String(e.id),data:e.data,status:e.status,created_at:String(e.created_at)}))),c(!1)})()},[p]);let y=async a=>{a.preventDefault();let r=(0,l.b)();if(!r||!h)return;c(!0);let{data:s,error:d}=await r.from("leads").insert({user_id:h.id,data:b,status:"new"}).select();!d&&s&&t([s[0],...e]),m(!1),x({name:"",email:""}),c(!1)},j=async()=>{let e=(0,l.b)();e&&(await e.auth.signOut(),p.push("/auth"))};return(0,r.jsxs)("div",{className:"min-h-screen bg-main-bg flex",children:[(0,r.jsx)(n.A,{user:null!=h?h:void 0,onProfileClick:()=>v(!0)}),(0,r.jsxs)("main",{className:"flex-1 lg:ml-64 p-6",children:[(0,r.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-3xl font-medium text-primary-text",children:"Leads"}),(0,r.jsx)(o.A,{variant:"primary","aria-label":"Add new lead",onClick:()=>m(!0),children:"+ Add Lead"})]}),u&&(0,r.jsxs)("form",{onSubmit:y,className:"bg-card-bg border border-border rounded-card p-6 mb-8 flex flex-col gap-4 max-w-md",children:[(0,r.jsx)("input",{className:"bg-main-bg border border-border rounded-btn px-4 py-2 text-primary-text",placeholder:"Name",value:b.name,onChange:e=>x({...b,name:e.target.value}),required:!0}),(0,r.jsx)("input",{className:"bg-main-bg border border-border rounded-btn px-4 py-2 text-primary-text",placeholder:"Email",type:"email",value:b.email,onChange:e=>x({...b,email:e.target.value}),required:!0}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(o.A,{type:"submit",variant:"primary","aria-label":"Save lead",children:"Save"}),(0,r.jsx)(o.A,{type:"button",variant:"secondary","aria-label":"Cancel",onClick:()=>m(!1),children:"Cancel"})]})]}),(0,r.jsx)("section",{children:a?(0,r.jsx)("div",{className:"text-secondary-text",children:"Loading..."}):0===e.length?(0,r.jsx)("div",{className:"text-secondary-text",children:"No leads found."}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{var t,a;return(0,r.jsxs)("div",{className:"bg-card-bg border border-border rounded-card p-6",children:[(0,r.jsx)("div",{className:"font-medium text-primary-text mb-2",children:(null==(t=e.data)?void 0:t.name)||"(No name)"}),(0,r.jsx)("div",{className:"text-secondary-text text-sm mb-1",children:(null==(a=e.data)?void 0:a.email)||"(No email)"}),(0,r.jsxs)("div",{className:"text-xs text-secondary-text",children:["Status: ",e.status||"new"]}),(0,r.jsxs)("div",{className:"text-xs text-secondary-text mt-2",children:["Created: ",new Date(e.created_at).toLocaleString()]})]},e.id)})})})]}),(0,r.jsx)(i.A,{user:null!=h?h:void 0,isVisible:f,onClose:()=>v(!1),onLogout:j})]})}},3741:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(5155),s=a(2115),d=a(2596),n=a(1934);let i={primary:"bg-gradient-to-r from-[#6D28D9] via-[#8B5CF6] to-[#232336] text-white shadow-lg hover:from-[#8B5CF6] hover:to-[#6D28D9] border-none",secondary:"bg-button-bg text-button-text border border-border hover:bg-button-hover-bg",outline:"bg-transparent text-primary-text border border-[#8B5CF6] hover:bg-[#232336] hover:text-white",danger:"bg-red-700 text-white border border-red-800 hover:bg-red-800"},l=(0,s.forwardRef)((e,t)=>{let{children:a,className:s,variant:l="primary",loading:o=!1,disabled:c,...u}=e;return(0,r.jsxs)(n.P.button,{ref:t,className:(0,d.A)("inline-flex items-center justify-center font-medium rounded-full px-8 py-4 text-lg transition-all duration-300 min-w-[160px] text-center group select-none disabled:opacity-50 disabled:cursor-not-allowed",i[l],s),whileHover:{scale:1.06,boxShadow:"0 2px 16px 0 rgba(139, 92, 246, 0.12)"},whileTap:{scale:.97},disabled:c||o,"aria-busy":o,...u,children:[o?(0,r.jsx)("span",{className:"inline-block animate-spin mr-2 w-5 h-5 border-2 border-t-transparent border-white rounded-full"}):null,a]})});l.displayName="Button";let o=l},5740:(e,t,a)=>{Promise.resolve().then(a.bind(a,2756))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,934,825,956,441,684,358],()=>t(5740)),_N_E=e.O()}]);